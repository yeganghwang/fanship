# 프로젝트 진행 상황

## 현재 상태

- **데이터베이스 연결**: NestJS가 TypeORM과 환경 변수(`.env`)를 사용하여 MariaDB에 연결되도록 설정했습니다.
- **사용자 엔티티**: `db_structure.md`의 `tb_user` 테이블을 기반으로 `User` 엔티티를 정의했습니다.
- **사용자 등록 (POST /api/users/register)**: 비밀번호 해싱(bcrypt) 및 사용자 이름, 이메일, 닉네임, 인스타그램 URL 중복 확인 기능을 포함한 사용자 등록 기능을 구현했습니다.
- **사용자 로그인 (POST /api/users/login)**: 비밀번호 확인 및 JWT 토큰 생성을 포함한 사용자 로그인 기능을 구현했습니다.
- **사용자 프로필 조회 (GET /api/users/{user_id})**: JWT 인증으로 보호되며, 인증된 사용자만 자신의 프로필을 조회할 수 있는 사용자 프로필 조회 기능을 구현했습니다.
- **회사 목록 조회 (GET /api/companies)**: `tb_company` 엔티티를 정의하고, 지역별 필터링이 가능한 회사 목록 조회 기능을 구현했습니다.
- **회사 소속된 셀럽 목록 조회 (GET /api/companies/{company_id}/celebs)**: `tb_celeb` 엔티티를 정의하고, 특정 회사에 소속된 셀럽 목록을 조회하는 기능을 구현했습니다.
- **셀럽 상세 조회 (GET /api/celebs/{celeb_id})**: `celeb_id`를 사용하여 셀럽의 상세 정보를 조회하는 기능을 구현했습니다.
- **즐겨찾기 추가 (POST /api/favorites)**: `tb_user_fav` 엔티티를 정의하고, 사용자 인증 기반으로 회사 또는 셀럽을 즐겨찾기에 추가하는 기능을 구현했습니다.
- **게시글 작성 (POST /api/posts)**: `tb_post` 엔티티를 정의하고, 사용자 인증 기반으로 게시글을 작성하는 기능을 구현했습니다.
- **게시글 목록 조회 (GET /api/posts)**: `notice` 쿼리 파라미터를 사용하여 공지사항만 조회하거나 전체 게시글을 조회하는 기능을 구현했습니다.
- **게시글 상세 조회 (GET /api/posts/{post_id})**: `post_id`를 사용하여 게시글의 상세 정보를 조회하고 조회수를 증가시키는 기능을 구현했습니다.
- **셀럽 스케줄 조회 (GET /api/celebs/{celeb_id}/schedules)**: `celeb_id`를 사용하여 특정 셀럽의 스케줄 목록을 조회하는 기능을 구현했습니다.
- **굿즈 등록 (POST /api/goods)**: `tb_goods` 엔티티를 정의하고, 사용자 인증 기반으로 굿즈를 등록하는 기능을 구현했습니다.
- **굿즈 목록 조회 (GET /api/goods)**: `seller_id` 쿼리 파라미터를 사용하여 특정 판매자의 굿즈만 조회하거나 전체 굿즈를 조회하는 기능을 구현했습니다.
- **굿즈 상세 조회 (GET /api/goods/{id})**: `id`를 사용하여 굿즈의 상세 정보를 조회하고 조회수를 증가시키는 기능을 구현했습니다.
- **로그인 기록 (POST /api/logins)**: `tb_login_log` 엔티티를 정의하고, 로그인 기록을 추가하는 기능을 구현했습니다.

### 테스트 결과

- **회원가입**: 성공적으로 동작하며, 중복 데이터에 대한 예외 처리도 잘 작동합니다. `position` 필드 및 `celeb` 유형 사용자에 대한 추가 유효성 검사가 정상적으로 작동합니다. 비밀번호 해싱 실패에 대한 오류 처리를 추가했습니다.
- **로그인**: 성공적으로 동작하며, 잘못된 자격 증명에 대한 예외 처리도 잘 작동합니다. JWT 토큰이 정상적으로 발급됩니다. JWT 토큰 생성 실패에 대한 오류 처리를 추가했습니다.
- **사용자 프로필 조회**: JWT 인증이 정상적으로 작동하며, 로그인한 사용자가 자신의 프로필을 조회할 수 있습니다. 다른 사용자의 프로필을 조회하려고 시도하면 `ForbiddenException`이 발생합니다.
- **회사 목록 조회**: `region` 쿼리 파라미터 유무에 따라 전체 또는 특정 지역의 회사 목록을 성공적으로 조회합니다.
- **회사 소속된 셀럽 목록 조회**: 특정 `company_id`에 소속된 셀럽 목록을 성공적으로 조회하며, 존재하지 않는 `company_id`에 대해서는 `NotFoundException`을 반환합니다.
- **셀럽 상세 조회**: 특정 `celeb_id`에 해당하는 셀럽의 상세 정보를 성공적으로 조회하며, 존재하지 않는 `celeb_id`에 대해서는 `NotFoundException`을 반환합니다.
- **즐겨찾기 추가**: 회사 및 셀럽 즐겨찾기 추가가 성공적으로 동작합니다. 유효성 검사, 중복 확인, 인증이 정상적으로 작동합니다. `userId`, `companyId`, `celebId`의 존재 여부 확인 로직을 추가했습니다.
- **게시글 작성**: 성공적으로 동작하며, 인증 및 유효성 검사가 정상적으로 작동합니다. `writerId`의 존재 여부 확인 로직을 추가했습니다.
- **게시글 목록 조회**: `notice` 쿼리 파라미터 유무에 따라 전체 또는 공지사항/일반 게시글 목록을 성공적으로 조회합니다.
- **게시글 상세 조회**: 특정 `post_id`에 해당하는 게시글의 상세 정보를 조회하고 조회수를 증가시키며, 존재하지 않는 `post_id`에 대해서는 `NotFoundException`을 반환합니다.
- **셀럽 스케줄 조회**: 특정 `celeb_id`에 해당하는 셀럽의 스케줄 목록을 조회하며, 존재하지 않는 `celeb_id`에 대해서는 `NotFoundException`을 반환합니다.
- **굿즈 등록**: 성공적으로 동작하며, 인증 및 유효성 검사가 정상적으로 작동합니다.
- **굿즈 목록 조회**: `seller_id` 쿼리 파라미터 유무에 따라 전체 또는 특정 판매자의 굿즈 목록을 성공적으로 조회합니다.
- **굿즈 상세 조회**: 특정 `goods_id`에 해당하는 굿즈의 상세 정보를 조회하고 조회수를 증가시키며, 존재하지 않는 `goods_id`에 대해서는 `NotFoundException`을 반환합니다.
- **로그인 기록**: 성공적으로 동작하며, 유효성 검사가 정상적으로 작동합니다. `userId`의 존재 여부 확인 로직을 추가했습니다.


## 다음 단계

- 더 견고한 오류 처리 및 유효성 검사를 추가합니다. (지속적인 개선)
- 구현된 기능에 대한 단위 및 E2E 테스트를 구현합니다.