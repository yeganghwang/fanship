# 프로젝트 진행 상황

## 현재 상태

- **데이터베이스 연결**: NestJS가 TypeORM과 환경 변수(`.env`)를 사용하여 MariaDB에 연결되도록 설정했습니다.
- **사용자 엔티티**: `db_structure.md`의 `tb_user` 테이블을 기반으로 `User` 엔티티를 정의했습니다.
- **사용자 등록 (POST /api/users/register)**: 비밀번호 해싱(bcrypt) 및 사용자 이름, 이메일, 닉네임, 인스타그램 URL 중복 확인 기능을 포함한 사용자 등록 기능을 구현했습니다.
- **사용자 로그인 (POST /api/users/login)**: 비밀번호 확인 및 JWT 토큰 생성을 포함한 사용자 로그인 기능을 구현했습니다.
- **사용자 프로필 조회 (GET /api/users/{user_id})**: JWT 인증으로 보호되며, 인증된 사용자만 자신의 프로필을 조회할 수 있는 사용자 프로필 조회 기능을 구현했습니다.
- **사용자 정보 수정 (PATCH /api/users/{user_id})**: JWT 인증으로 보호되며, 인증된 사용자만 자신의 프로필을 수정할 수 있는 사용자 정보 수정 기능을 구현했습니다.
- **사용자 삭제 (DELETE /api/users/{user_id})**: JWT 인증으로 보호되며, 인증된 사용자만 자신의 계정을 삭제할 수 있는 사용자 삭제 기능을 구현했습니다.
- **회사 목록 조회 (GET /api/companies)**: `tb_company` 엔티티를 정의하고, 지역별 필터링이 가능한 회사 목록 조회 기능을 구현했습니다.
- **회사 소속된 셀럽 목록 조회 (GET /api/companies/{company_id}/celebs)**: `tb_celeb` 엔티티를 정의하고, 특정 회사에 소속된 셀럽 목록을 조회하는 기능을 구현했습니다.
- **셀럽 상세 조회 (GET /api/celebs/{celeb_id})**: `celeb_id`를 사용하여 셀럽의 상세 정보를 조회하는 기능을 구현했습니다.
- **즐겨찾기 추가 (POST /api/favorites)**: `tb_user_fav` 엔티티를 정의하고, 사용자 인증 기반으로 회사 또는 셀럽을 즐겨찾기에 추가하는 기능을 구현했습니다.
- **사용자가 작성한 게시글 목록 조회 (GET /api/users/{user_id}/posts)**: JWT 인증으로 보호되며, 특정 사용자가 작성한 게시글 목록을 조회하는 기능을 구현했습니다.
- **게시글 작성 (POST /api/posts)**: `tb_post` 엔티티를 정의하고, 사용자 인증 기반으로 게시글을 작성하는 기능을 구현했습니다.
- **게시글 목록 조회 (GET /api/posts)**: `notice` 쿼리 파라미터를 사용하여 공지사항만 조회하거나 전체 게시글을 조회하는 기능을 구현했습니다.
- **게시글 상세 조회 (GET /api/posts/{post_id})**: `post_id`를 사용하여 게시글의 상세 정보를 조회하고 조회수를 증가시키는 기능을 구현했습니다.
- **게시글 수정 (PATCH /api/posts/{post_id})**: JWT 인증으로 보호되며, 인증된 사용자만 자신이 작성한 게시글을 수정할 수 있는 기능을 구현했습니다.
- **게시글 삭제 (DELETE /api/posts/{post_id})**: JWT 인증으로 보호되며, 인증된 사용자만 자신이 작성한 게시글을 삭제할 수 있는 기능을 구현했습니다.
- **댓글 작성 (POST /api/posts/{post_id}/comments)**: JWT 인증으로 보호되며, 특정 게시글에 댓글을 작성하는 기능을 구현했습니다.
- **댓글 목록 조회 (GET /api/posts/{post_id}/comments)**: 특정 게시글의 댓글 목록을 조회하는 기능을 구현했습니다.
- **댓글 수정 (PATCH /api/comments/{comment_id})**: JWT 인증으로 보호되며, 인증된 사용자만 자신이 작성한 댓글을 수정할 수 있는 기능을 구현했습니다.
- **댓글 삭제 (DELETE /api/comments/{comment_id})**: JWT 인증으로 보호되며, 인증된 사용자만 자신이 작성한 댓글을 삭제할 수 있는 기능을 구현했습니다.
- **로그인 기록 (POST /api/logins)**: `tb_login_log` 엔티티를 정의하고, 로그인 기록을 추가하는 기능을 구현했습니다.
- **셀럽 스케줄 조회 (GET /api/celebs/{celeb_id}/schedules)**: `celeb_id`를 사용하여 특정 셀럽의 스케줄 목록을 조회하는 기능을 구현했습니다.
- **굿즈 등록 (POST /api/goods)**: `tb_goods` 엔티티를 정의하고, 사용자 인증 기반으로 굿즈를 등록하는 기능을 구현했습니다.
- **굿즈 목록 조회 (GET /api/goods)**: `seller_id` 쿼리 파라미터를 사용하여 특정 판매자의 굿즈만 조회하거나 전체 굿즈를 조회하는 기능을 구현했습니다.
- **굿즈 상세 조회 (GET /api/goods/{id})**: `id`를 사용하여 굿즈의 상세 정보를 조회하고 조회수를 증가시키는 기능을 구현했습니다.
- **굿즈 수정 (PATCH /api/goods/{id})**: JWT 인증으로 보호되며, 굿즈 판매자만 자신이 등록한 굿즈를 수정할 수 있는 기능을 구현했습니다.
- **굿즈 삭제 (DELETE /api/goods/{id})**: JWT 인증으로 보호되며, 굿즈 판매자만 자신이 등록한 굿즈를 삭제할 수 있는 기능을 구현했습니다.
- **회사 등록 (POST /api/companies)**: JWT 인증으로 보호되며, CEO 권한을 가진 사용자만 새로운 회사를 등록할 수 있는 기능을 구현했습니다.

### 테스트 결과

- **PATCH /api/users/{user_id}**: 사용자 정보 수정 API 테스트 완료.
  - 사용자 생성 -> 로그인 (JWT 획득) -> 사용자 정보 수정 요청 순서로 테스트 진행.
  - `update-user.dto.ts`에 `nickname` 길이 제한 유효성 검사 추가하여 문제 해결.
  - 최종적으로 200 OK 응답 및 사용자 정보 업데이트 확인.
- **DELETE /api/users/{user_id}**: 사용자 삭제 API 테스트 완료.
  - 사용자 생성 -> 로그인 (JWT 획득) -> 사용자 삭제 요청 순서로 테스트 진행.
  - 최종적으로 204 No Content 응답 확인.
- **즐겨찾기 추가 (POST /api/favorites)**: 즐겨찾기 추가 API 테스트 완료.
  - 사용자 생성 -> 로그인 (JWT 획득) -> 회사 즐겨찾기 추가 -> 셀럽 즐겨찾기 추가 요청 순서로 테스트 진행.
  - 최종적으로 201 Created 응답 및 즐겨찾기 추가 확인.
- **즐겨찾기 삭제 (DELETE /api/favorites/{favorite_id})**: 즐겨찾기 삭제 API 테스트 완료.
  - 사용자 생성 -> 로그인 (JWT 획득) -> 즐겨찾기 추가 -> 즐겨찾기 삭제 요청 순서로 테스트 진행.
  - 최종적으로 204 No Content 응답 확인.
- **GET /api/users/{user_id}/favorites**: 사용자 즐겨찾기 목록 조회 API 테스트 완료.
  - 사용자 생성 -> 로그인 (JWT 획득) -> 즐겨찾기 추가 -> 즐겨찾기 목록 조회 요청 순서로 테스트 진행.
  - 최종적으로 200 OK 응답 및 즐겨찾기 목록 확인.
- **GET /api/users/{user_id}/posts**: 사용자 게시글 목록 조회 API 테스트 완료.
  - 사용자 생성 -> 로그인 (JWT 획득) -> 게시글 생성 -> 사용자 게시글 목록 조회 순서로 테스트 진행.
  - 최종적으로 200 OK 응답 및 게시글 목록 확인.
- **PATCH /api/posts/{post_id}**: 게시글 수정 API 테스트 완료.
  - 사용자 생성 -> 로그인 (JWT 획득) -> 게시글 생성 -> 게시글 수정 요청 순서로 테스트 진행.
  - 최종적으로 200 OK 응답 및 게시글 정보 업데이트 확인.
- **DELETE /api/posts/{post_id}**: 게시글 삭제 API 테스트 완료.
  - 사용자 생성 -> 로그인 (JWT 획득) -> 게시글 생성 -> 게시글 삭제 요청 순서로 테스트 진행.
  - 최종적으로 204 No Content 응답 확인.
- **POST /api/posts/{post_id}/comments**: 댓글 작성 API 테스트 완료.
  - 사용자 생성 -> 로그인 (JWT 획득) -> 게시글 생성 -> 댓글 작성 요청 순서로 테스트 진행.
  - `create-comment.dto.ts` 및 `comment.controller.ts`, `comment.service.ts` 수정 후 201 Created 응답 및 댓글 생성 확인.
- **GET /api/posts/{post_id}/comments**: 댓글 목록 조회 API 테스트 완료.
  - 게시글에 작성된 댓글 목록 조회 요청 순서로 테스트 진행.
  - 최종적으로 200 OK 응답 및 댓글 목록 확인.
- **PATCH /api/comments/{comment_id}**: 댓글 수정 API 테스트 완료.
  - 사용자 생성 -> 로그인 (JWT 획득) -> 게시글 생성 -> 댓글 작성 -> 댓글 수정 요청 순서로 테스트 진행.
  - 최종적으로 200 OK 응답 및 댓글 정보 업데이트 확인.
- **DELETE /api/comments/{comment_id}**: 댓글 삭제 API 테스트 완료.
  - 사용자 생성 -> 로그인 (JWT 획득) -> 게시글 생성 -> 댓글 작성 -> 댓글 삭제 요청 순서로 테스트 진행.
  - 최종적으로 204 No Content 응답 확인.
- **POST /api/logins**: 로그인 기록 API 테스트 완료.
  - 사용자 생성 -> 로그인 기록 저장 요청 순서로 테스트 진행.
  - 최종적으로 201 Created 응답 확인.
- **GET /api/companies**: 회사 목록 조회 API 테스트 완료.
  - 필터링 없이 전체 회사 목록 조회 요청 순서로 테스트 진행.
  - 최종적으로 200 OK 응답 및 회사 목록 확인.
- **GET /api/companies/{company_id}/celebs**: 회사 소속 셀럽 목록 조회 API 테스트 완료.
  - 샘플 데이터를 기반으로 `company_id` 1에 대한 셀럽 목록 조회 요청 순서로 테스트 진행.
  - 최종적으로 200 OK 응답 및 셀럽 목록 확인.
- **GET /api/celebs/{celeb_id}**: 셀럽 상세 조회 API 테스트 완료.
  - 샘플 데이터를 기반으로 `celeb_id` 1에 대한 셀럽 상세 정보 조회 요청 순서로 테스트 진행.
  - 최종적으로 200 OK 응답 및 셀럽 상세 정보 확인.
- **GET /api/celebs/{celeb_id}/schedules**: 셀럽 스케줄 조회 API 테스트 완료.
  - 샘플 데이터를 기반으로 `celeb_id` 1에 대한 스케줄 목록 조회 요청 순서로 테스트 진행.
  - 최종적으로 200 OK 응답 및 스케줄 목록 확인.
- **POST /api/goods**: 굿즈 등록 API 테스트 완료.
  - 사용자 생성 -> 로그인 (JWT 획득) -> 굿즈 등록 요청 순서로 테스트 진행.
  - 최종적으로 201 Created 응답 및 굿즈 생성 확인.
- **GET /api/goods**: 굿즈 목록 조회 API 테스트 완료.
  - 필터링 없이 전체 굿즈 목록 조회 요청 순서로 테스트 진행.
  - 최종적으로 200 OK 응답 및 굿즈 목록 확인.
- **GET /api/goods/{id}**: 굿즈 상세 조회 API 테스트 완료.
  - 샘플 데이터를 기반으로 `id` 5에 대한 굿즈 상세 정보 조회 요청 순서로 테스트 진행.
  - 최종적으로 200 OK 응답 및 굿즈 상세 정보 확인.
- **PATCH /api/goods/{id}**: 굿즈 수정 API 테스트 완료.
  - 사용자 생성 -> 로그인 (JWT 획득) -> 굿즈 등록 -> 굿즈 수정 요청 순서로 테스트 진행.
  - 최종적으로 200 OK 응답 및 굿즈 정보 업데이트 확인.
- **DELETE /api/goods/{id}**: 굿즈 삭제 API 테스트 완료.
  - 사용자 생성 -> 로그인 (JWT 획득) -> 굿즈 등록 -> 굿즈 삭제 요청 순서로 테스트 진행.
  - 최종적으로 204 No Content 응답 확인.
- **POST /api/companies**: 회사 등록 API 테스트 완료.
  - CEO 권한을 가진 사용자 생성 -> 로그인 (JWT 획득) -> 회사 등록 요청 순서로 테스트 진행.
  - 최종적으로 201 Created 응답 및 회사 생성 확인.

## 다음 단계

- 더 견고한 오류 처리 및 유효성 검사를 추가합니다. (지속적인 개선)
- 구현된 기능에 대한 단위 및 E2E 테스트를 구현합니다.